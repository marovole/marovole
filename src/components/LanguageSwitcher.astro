---
import { languages, defaultLang } from '../i18n/ui';

interface Props {
  currentLang: string;
}

const { currentLang } = Astro.props;

const currentPath = Astro.url.pathname;

// Generate paths for both languages
// For English (default): strip /zh prefix or keep root path
// For Chinese: add /zh prefix
const getPathWithoutLang = (path: string) => {
  return path.replace(/^\/(en|zh)/, '') || '/';
};

const basePath = getPathWithoutLang(currentPath);
const enPath = basePath;
const zhPath = `/zh${basePath === '/' ? '' : basePath}`;
---

<div class="flex items-center gap-2">
  <a
    href={enPath}
    class="text-xs font-mono px-2 py-1 rounded border transition-all duration-300"
    class:list={[
      currentLang === 'en'
        ? 'border-[var(--color-primary)] text-[var(--color-primary)]'
        : 'border-[var(--color-border)] text-[var(--color-text-muted)] hover:text-[var(--color-text)]'
    ]}
    aria-label="Switch to English"
  >
    EN
  </a>
  <span class="text-[var(--color-text-muted)]">/</span>
  <a
    href={zhPath}
    class="text-xs font-mono px-2 py-1 rounded border transition-all duration-300"
    class:list={[
      currentLang === 'zh'
        ? 'border-[var(--color-primary)] text-[var(--color-primary)]'
        : 'border-[var(--color-border)] text-[var(--color-text-muted)] hover:text-[var(--color-text)]'
    ]}
    aria-label="Switch to Chinese"
  >
    中文
  </a>
</div>
